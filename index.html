<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Online Shop</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f2f3f5;
            color: #333;
            text-align: center;
            padding: 20px;
        }

        h1 {
            color: #0088cc;
            margin-bottom: 20px;
        }

        img {
            width: 300px;
            height: auto;
            border-radius: 10px;
            margin-bottom: 15px;
        }

        button {
            background-color: #0088cc;
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 18px;
            border-radius: 8px;
            cursor: pointer;
            margin: 10px;
        }

        button:hover {
            background-color: #005f8c;
        }

        /* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç */
        #main {
            display: block;
        }

        /* –§–æ—Ä–º–∞ –∑–∞–∫–∞–∑–∞ - —Å–∫—Ä—ã—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
        #orderForm {
            display: none;
            margin-top: 20px;
        }

        input {
            display: block;
            width: 80%;
            margin: 10px auto;
            padding: 10px;
            font-size: 16px;
            border-radius: 5px;
            border: 1px solid #ccc;
        }

        .error {
            color: red;
            font-size: 14px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <!-- –û—Å–Ω–æ–≤–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ -->
    <div id="main">
        <h1>Online Shop</h1>

        <!-- –ò—Å–ø–æ–ª—å–∑—É–µ–º –æ–Ω–ª–∞–π–Ω –∫–∞—Ä—Ç–∏–Ω–∫—É –≤–º–µ—Å—Ç–æ –ª–æ–∫–∞–ª—å–Ω–æ–π -->
        <img src="https://png.pngtree.com/png-clipart/20210521/ourmid/pngtree-dessert-cheesecake-png-image_3312124.jpg" alt="Cheesecake">

        <!-- –ö–Ω–æ–ø–∫–∞ –ø–æ–∫—É–ø–∫–∏ -->
        <button id="buy">–ö—É–ø–∏—Ç—å</button>
    </div>

    <!-- –§–æ—Ä–º–∞ –∑–∞–∫–∞–∑–∞ -->
    <div id="orderForm">
        <h2>–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h2>

        <input type="text" id="name" placeholder="–ò–º—è (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)">
        <input type="email" id="email" placeholder="Email (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)">
        <input type="text" id="phone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)">

        <div class="error" id="error"></div>

        <button type="button" id="order">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
    </div>

    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–≥—Ä—É–∑–∫—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        console.log("–°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞!");

        // –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Telegram WebApp
        let tg = window.Telegram.WebApp;
        console.log("Telegram WebApp:", tg);

        // –†–∞—Å—à–∏—Ä—è–µ–º –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω
        tg.expand();

        // –ü–æ–ª—É—á–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã
        let buy = document.getElementById("buy");
        let main = document.getElementById("main");
        let orderForm = document.getElementById("orderForm");
        let order = document.getElementById("order");
        let error = document.getElementById("error");

        console.log("–≠–ª–µ–º–µ–Ω—Ç—ã –Ω–∞–π–¥–µ–Ω—ã:", { buy, main, orderForm, order });

        // –ì–õ–ê–í–ù–û–ï - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ "–ö—É–ø–∏—Ç—å"
        buy.addEventListener("click", function() {
            console.log("üéØ –ö–ù–û–ü–ö–ê –ö–£–ü–ò–¢–¨ –ù–ê–ñ–ê–¢–ê!");

            // –°–∫—Ä—ã–≤–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
            main.style.display = "none";
            console.log("–û—Å–Ω–æ–≤–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–∫—Ä—ã—Ç–æ");

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É
            orderForm.style.display = "block";
            console.log("–§–æ—Ä–º–∞ –ø–æ–∫–∞–∑–∞–Ω–∞");
        });

        // –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–∞–Ω–Ω—ã—Ö
        function validateForm(name, phone) {
            if (name.length < 3) {
                error.textContent = "–ò–º—è –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–µ –º–µ–Ω—å—à–µ 3 —Å–∏–º–≤–æ–ª–æ–≤";
                return false;
            }
            if (phone.length < 5) {
                error.textContent = "–¢–µ–ª–µ—Ñ–æ–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–µ –º–µ–Ω—å—à–µ 5 —Å–∏–º–≤–æ–ª–æ–≤";
                return false;
            }
            error.textContent = "";
            return true;
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ "–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑"
        order.addEventListener("click", function() {
            console.log("üéØ –ö–ù–û–ü–ö–ê –û–§–û–†–ú–ò–¢–¨ –ó–ê–ö–ê–ó –ù–ê–ñ–ê–¢–ê!");

            let name = document.getElementById("name").value.trim();
            let email = document.getElementById("email").value.trim();
            let phone = document.getElementById("phone").value.trim();

            console.log("–î–∞–Ω–Ω—ã–µ:", { name, email, phone });

            if (!validateForm(name, phone)) {
                console.log("–í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–µ –ø—Ä–æ—à–ª–∞");
                return;
            }

            let orderData = {
                name: name,
                email: email,
                phone: phone
            };

            console.log("–û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ:", orderData);

            try {
                tg.sendData(JSON.stringify(orderData));
                console.log("–î–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã!");
                tg.close();
            } catch (e) {
                console.error("–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏:", e);
            }
        });

        // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
        window.addEventListener('load', function() {
            console.log("–û–∫–Ω–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≥—Ä—É–∂–µ–Ω–æ!");
            console.log("–ö–Ω–æ–ø–∫–∞ –∫—É–ø–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç:", !!document.getElementById("buy"));
        });
    </script>
</body>
</html>